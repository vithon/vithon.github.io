<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>  In chuỗi unicode ra màn hình
 | Python Cho Người Việt</title>

    <meta name="author" content="Nhóm PCNV"/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"/>
    <link rel="stylesheet" href="../../theme/css/jquery.mglass.css"/>
    <link rel="stylesheet" href="../../theme/css/pygment-solarized-dark.css"/>
    <link rel="stylesheet" href="../../theme/css/style.css"/>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>


    <link rel="icon" href="../../favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon">

    <!-- Feeds -->
      <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Python Cho Người Việt - All posts - Atom Feed"/>
      <link href="/feeds/bai-viet.atom.xml" type="application/atom+xml" rel="alternate" title="Python Cho Người Việt - Category: Bài viết - Atom Feed"/>


  </head>

  <body>

    <div class="container">

      <div class="page-header">
          <a href="../.." class="container pull-left">
            <div class="">
              <div class="side"><img src="../../logo.png" class="img-responsive"/></div>
            </div>
          </a>
        <h1><a href="../..">Python Cho Người Việt</a> <small></small></h1>
      </div>

      <nav class="navbar navbar-default">

        <!-- Hamburger menu for mobile -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#plumage-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../.." title="">Python Cho Người Việt</a>
        </div>

        <!-- Menus and search forms -->
        <div class="collapse navbar-collapse" id="plumage-navbar-collapse-1">

          <ul class="nav navbar-nav">
<li >
                <a href="../../static/tutorial/2.5/tut.html">Bài chỉ dẫn 2.5</a>
              </li>
<li >
                <a href="../../category/tin-tuc.html">Tin tức</a>
              </li>
<li >
                <a href="../../category/bai-viet.html">Bài viết</a>
              </li>
<li >
                <a href="http://forum.vithon.org">Diễn đàn</a>
              </li>
<li >
                  <a href="../../page/about.html">Giới thiệu</a>
                </li>
          </ul>


            <form class="navbar-form navbar-right" role="search" action="../../search.html" onsubmit="return validateForm(this.elements['q'].value);">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" name="q" id="tipue_search_input" class="form-control search-query" placeholder="Search" required />
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fa
                        fa-search fa-fw"></i></button>
                  </span>
                </div>
              </div>
            </form>

        </div>

      </nav>

    </div>


    <div class="container main">


      <div class="row">
        <div class=" col-md-9  ">
  <h1>
    <a href="../../2009/12/in-chuoi-unicode-ra-man-hinh.html" rel="bookmark" title="Permalink to In chuỗi unicode ra màn hình">In chuỗi unicode ra màn hình</a>
  </h1>
        </div>
      </div>

      <div class="row">


        <div class=" col-md-9 " id="content" role="main">
  

  <div>
    <p>Một ngày nào đấy, có lẽ bạn sẽ rất bực mình khi gặp phải một lỗi tương tự như sau:</p>
<div class="highlight"><pre><span></span><span class="gp">c:\tmp&gt;</span>c<span class="p">:</span><span class="nl">\Python26\python.exe</span><span class="c1"> helloworld.py</span>
<span class="go">Traceback (most recent call last):</span>
<span class="gp">  File &quot;helloworld.py&quot;, line 3, in &lt;module&gt;</span>
<span class="go">    print u&quot;Xin ch├áo bß║ín, Python!&quot;</span>
<span class="go">  File &quot;c:\Python26\lib\encodings\cp437.py&quot;, line 12, in encode</span>
<span class="go">    return codecs.charmap_encode(input,errors,encoding_map)</span>
<span class="go">UnicodeEncodeError: &#39;charmap&#39; codec can&#39;t encode character u&#39;\u1ea1&#39; in position</span>
<span class="gp"> 10: character maps to &lt;undefined&gt;</span>
</pre></div>
<p>Mã nguồn của <tt class="docutils literal">helloworld.py</tt> chỉ đơn giản như sau:</p>
<div class="highlight"><pre><span></span><span class="c1"># -*- encoding: utf-8 -*-</span>

<span class="k">print</span> <span class="sa">u</span><span class="s2">&quot;Xin chào bạn, Python!&quot;</span>
</pre></div>
<p>Lỗi này xảy ra vì chúng ta đang in một chuỗi unicode, với các ký tự nằm ngoài bảng mã ASCII (hoặc bảng mã mặc định của màn hình hiện tại).</p>
<p>Khi gặp phải các ký tự nằm ngoài bảng mã này, Python mặc định sẽ nâng một biệt lệ cho biết chính xác đó là ký tự nào, nằm ở vị trí nào. Như ví dụ trên, đó là ký tự <tt class="docutils literal">ạ</tt> có mã unicode là <strong>1EA1</strong> nằm tại vị trí thứ <strong>10</strong> (vị trí bắt đầu là 0) trong chuỗi <tt class="docutils literal">Xin chào bạn, Python!</tt>.</p>
<p>Có một số cách để khắc phục lỗi này, từ việc thay đổi một số biến môi trường, cho đến việc sửa từng dòng lệnh. Tất cả đều nhằm một mục đích là chuyển <strong>chuỗi unicode</strong> cần in thành <strong>chuỗi byte</strong> theo bảng mã UTF-8.</p>
<ul>
<li><p class="first">Thay đổi biến môi trường: Biến môi trường <tt class="docutils literal">PYTHONIOENCODING</tt> được dùng để định nghĩa bảng mã cho các bộ nhập chuẩn, bộ xuất chuẩn, và bộ lỗi chuẩn (stdin, stdout, stderr). Chúng ta có thể định nghĩa biến môi trường này thành <strong>utf-8</strong> như sau:</p>
<div class="highlight"><pre><span></span><span class="gp">c:\tmp&gt;</span><span class="k">set</span> <span class="nv">PYTHONIOENCODING</span><span class="p">=</span>utf-8

<span class="gp">c:\tmp&gt;</span>c<span class="p">:</span><span class="nl">\Python26\python.exe</span><span class="c1"> helloworld.py</span>
<span class="go">Xin ch├áo bß║ín, Python!</span>
</pre></div>
</li>
<li><p class="first">Thay đổi bộ xuất chuẩn: Bộ xuất chuẩn (<tt class="docutils literal">sys.stdout</tt>) có thể được &quot;gói&quot; trong bảng mã mới thông qua mô-đun <tt class="docutils literal">codecs</tt>.</p>
<div class="highlight"><pre><span></span><span class="c1"># -*- encoding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">writer_factory</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">getwriter</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">writer_factory</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>

<span class="k">print</span> <span class="sa">u</span><span class="s2">&quot;Xin chào bạn, Python!&quot;</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="gp">c:\tmp&gt;</span>c<span class="p">:</span><span class="nl">\Python26\python</span><span class="c1"> helloworld.py</span>
<span class="go">Xin ch├áo bß║ín, Python!</span>
</pre></div>
</li>
<li><p class="first">Thay đổi từng dòng lệnh <tt class="docutils literal">print</tt>:</p>
<div class="highlight"><pre><span></span><span class="c1"># -*- encoding: utf-8 -*-</span>
<span class="k">print</span> <span class="sa">u</span><span class="s2">&quot;Xin chào bạn, Python!&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="gp">c:\tmp&gt;</span>c<span class="p">:</span><span class="nl">\Python26\python</span><span class="c1"> helloworld.py</span>
<span class="go">Xin ch├áo bß║ín, Python!</span>
</pre></div>
</li>
</ul>
<p>Như chúng ta thấy, cách nào cũng dẫn đến cùng một kết quả mong muốn. Việc áp dụng cách nào sẽ phụ thuộc vào hoàn cảnh của từng chương trình.</p>

  </div>



        </div>

          <div class="col-md-3">
  <div class="well">

    <p><abbr title="2009-12-16T14:33:00+07:00"><i class="fa fa-calendar"></i> Wed 16 December 2009</abbr></p>

      <p><address>
        <i class="fa fa-user"></i> By
          <a href="../../author/nguyen-thanh-nam.html" rel="author">Nguyễn Thành Nam</a>
      </address></p>

    <hr/>

      <p>
              <a href="../../category/bai-viet.html" rel="tag"
                  data-toggle="tooltip" class="label label-info"
                  title="44 articles in this category">Bài viết</a>
            <a href="../../tag/unicode.html" data-toggle="tooltip"
      class="label label-default"
      title="3 articles with this tag">unicode</a>
            <a href="../../tag/utf.html" data-toggle="tooltip"
      class="label label-default"
      title="2 articles with this tag">utf</a>
            <a href="../../tag/pythonioencoding.html" data-toggle="tooltip"
      class="label label-default"
      title="1 article with this tag">PYTHONIOENCODING</a>
            <a href="../../tag/print.html" data-toggle="tooltip"
      class="label label-default"
      title="1 article with this tag">print</a>
            <a href="../../tag/getwriter.html" data-toggle="tooltip"
      class="label label-default"
      title="1 article with this tag">getwriter</a>
            <a href="../../tag/encode.html" data-toggle="tooltip"
      class="label label-default"
      title="1 article with this tag">encode</a>
      </p>
      <hr/>



  </div>
            
          </div>

      </div>

    </div>

    <!-- TODO: make footer sticky -->
    <footer class="container-fluid">
      <div class="container">
        <div class="row">

            <div class="col-md-2">
            </div>
            <div class="col-md-2">
                <h5>Links</h5>
                <ul class="list-unstyled">
                  <li>  <a href="https://www.python.org/">
      <i class="fa fa-link fa-fw"></i>
    Python.org
  </a></li>
                </ul>
            </div>

          <div class="col-md-2">
            <h5>Browse content by</h5>
            <ul class="list-unstyled">
                <li><a href="../../authors.html"><i class="fa fa-user fa-fw"></i> Authors</a></li>
                <li><a href="../../categories.html"><i class="fa fa-folder fa-fw"></i> Categories</a></li>
                <li><a href="../../archives.html"><i class="fa fa-calendar fa-fw"></i> Dates</a></li>
                <li><a href="../../tags.html"><i class="fa fa-tag fa-fw"></i> Tags</a></li>
            </ul>
          </div>

          <div class="col-md-2">
              <h5>Feeds</h5>
              <ul class="list-unstyled">
                  <li><small><a href="/feeds/all.atom.xml"><i class="fa fa-rss fa-fw"></i> All posts (Atom)</a></small></li>
                  <li><small><a href="/feeds/bai-viet.atom.xml"><i class="fa fa-rss fa-fw"></i> Category: Bài viết (Atom)</a></small></li>
              </ul>
          </div>

        </div>
      </div>

      <h5 class="text-right"><a href="#"><i class="fa fa-arrow-up"></i> Back to top</a></h5>

      <div class="container">
        <div class="row col-md-12 text-muted text-center">
          <p>&copy; 2007-2016 Nhóm PCNV.</p>
          Site generated by <a href="https://getpelican.com"> Pelican</a>.<br/>
          <a href="https://github.com/kdeldycke/plumage"> Plumage</a> theme by <a href="https://kevin.deldycke.com">Kevin Deldycke</a>.
        </div>
      </div>

    </footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script src="../../theme/js/jquery.mglass.js"></script>
    <script src="../../theme/js/application.js"></script>

  </body>
</html>